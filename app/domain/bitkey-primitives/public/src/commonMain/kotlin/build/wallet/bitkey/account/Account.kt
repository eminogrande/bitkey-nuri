package build.wallet.bitkey.account

import bitkey.account.AccountConfig
import build.wallet.bitkey.app.AppRecoveryAuthKey
import build.wallet.bitkey.f8e.AccountId
import build.wallet.crypto.PublicKey

sealed interface Account {
  /**
   * ID of this account, generated by f8e during account creation.
   */
  val accountId: AccountId

  /**
   * Environment configuration for this account.
   */
  val config: AccountConfig
}

val Account.appRecoveryAuthKey: PublicKey<AppRecoveryAuthKey>
  get() = when (this) {
    is FullAccount -> keybox.activeAppKeyBundle.recoveryAuthKey
    is LiteAccount -> recoveryAuthKey
    is OnboardingSoftwareAccount -> recoveryAuthKey
    is SoftwareAccount -> keybox.recoveryAuthKey
  }
